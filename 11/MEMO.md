# 第11章 コンパイラ#2: コード生成

## やったこと

本書の指示通りに順に進めていった。

* コンパイル結果のxmlファイルは、本書の指示通りに作ると、同ファイル内にデフォルトで存在する正解のもの（{jackファイル名}.xml）に上書きされてしまうので、{jackファイル名}.myImpl.xmlとして出力するようにした

* かなり汚いコードになってしまった（反省）

### 1段階目：シンボルテーブル

* シンボルテーブルの作成

* xmlの出力に識別子の情報を加えた

### 2段階目：コード生成

* 本書で指示されているテストプログラムの順に従って、その都度テストプログラムに必要な機能を、前章で作成したCompilationEngineをベースに実装していく

## メモ

 * 配列操作においては、tempセグメントを上手く使うことが鍵

    * 配列操作の際、tempセグメントに一時的に操作・代入対象となるアドレスを退避させる必要がある
    
* 基本的には、実行してみてエラーが出たら、変換後のvmファイルを見ておかしい処理をしている部分を特定して修正するということを繰り返した
    
    * テストプログラムのjackコードにprint文を追記して、挙動が怪しい部分の値を表示してみたりした